# JOUR 21

## LIVESHARE

https://prod.liveshare.vsengsaas.visualstudio.com/join?24490297386DEE2ACAF1A475BEBBF4BA3AB3


## NEWS / QUESTIONS

### CSS

    CONSTRUIRE LES REGLES EN PARTANT DES BALISES PARENTES 
    ET PROGRESSIVEMENT AVANCER DANS LES BALISES ENFANTS

## LICENCE GPLv3 DANS WORDPRESS

    FICHIER license.txt...

    WordPress is released under the GPL

    https://fr.wikipedia.org/wiki/Licence_publique_g%C3%A9n%C3%A9rale_GNU

    https://www.gnu.org/licenses/gpl-howto.fr.html

    LA LICENCE GPL FORCE LE CODE A ETRE OPEN SOURCE

    MAIS LES FICHIERS PHP DES THEMES ET DES EXTENSIONS SONT AUSSI CONTAMINEES PAR LA LICENCE GPL

    (MAIS PAS LES FICHIERS JS, CSS, etc... QUI SONT CHARGES PAR LE NAVIGATEUR...)

## HIERARCHIE DES TEMPLATES DANS UN THEME


    index.php       EST LE TEMPLATE PAR DEFAUT
    page-templates/ ON PEUT AJOUTER DES TEMPLATES SUPPLEMENTAIRES (POUR LES PAGES, ...)
    ...

    WORDPRESS SUIT UN ARBRE DE DECISION POUR CHERCHER LE FICHIER DE TEMPLATE 
    QUI EST PRIORITAIRE QUAND IL AFFICHE UNE PAGE DANS LE NAVIGATEUR...

    https://developer.wordpress.org/themes/basics/template-hierarchy/

    QUAND LE NAVIGATEUR DEMANDE UNE URL
    (CONTROLLER)    WORDPRESS EXAMINE L'URL 
    (MODEL)         ET DETERMINE LE CONTENU ASSOCIE A CETTE URL
    (VIEW)          ET ENSUITE DANS LE THEME, 
                    WORDPRESS VA SELECTIONNER LE TEMPLATE LE PLUS PRIORITAIRE
                    POUR AFFICHER CE CONTENU

    * SCHEMA DE LA HIERARCHIE DES TEMPLATES
    https://developer.wordpress.org/files/2014/10/Screenshot-2019-01-23-00.20.04.png

    https://wphierarchy.com/

    * ET PRENDRE LE TEMPS DE LIRE LA DOCUMENTATION PLUS EN DETAIL...
    https://developer.wordpress.org/themes/basics/
    ...
    https://developer.wordpress.org/themes/basics/template-hierarchy/


    PAUSE JUSQU'A 10H50...


## EXERCICES: CREER DES TEMPLATES PLUS PRIORITAIRES QUE index.php


    CREER UN TEMPLATE POUR AFFICHER UN SAFARI DE MANIERE DIFFERENTE DES AUTRES PAGES...


## MAINTENANCE SUR LES SITES WORDPRESS

    WHODUNIT COMMUNIQUE DE MANIERE TRES TRANSPARENTE SUR LEUR FONCTIONNEMENT
    https://www.whodunit.fr/maintenance-wordpress/nos-offres-de-maintenance/


## SHORTCODES

    HISTORIQUEMENT, POUR PERMETTRE AUX UTILISATEURS D'INSERER UN CONTENU COMPLEXE
    LE DEVELOPPEUR VA PROPOSER DES SHORTCODES...
    (AVEC GUTENBERG ET LES BLOCS, LA TENDANCE EVOLUE VERS LA CREATION DE BLOCS POUR REMPLACER LES SHORTCODES...)

    COMMENT CREER UN SHORTCODE 
    https://codex.wordpress.org/Shortcode_API

    UN SHORTCODE EST COMME UNE BALISE AVEC DES []
    [monshortcode]
    WORDPRESS VA DETECTER CE SHORTCODE ET LE REMPLACER PAR UN CONTENU PLUS COMPLEXE

    https://developer.wordpress.org/reference/functions/add_shortcode/


    DANS LE FICHIER functions.php

```php

// AJOUTER NOS SHORTCODES
// https://codex.wordpress.org/Shortcode_API

// [heure]
function heure_func ()
{
    // ON RENVOIE COMME RESULTAT LE TEXTE QUI REMPLACE LE SHORTCODE
	return date("H:i:s");
}
// ON AJOUTE LE CALLBACK SUR LE SHORTCODE [heure]
// https://developer.wordpress.org/reference/functions/add_shortcode/
// LE PREMIER PARAMETRE EST LA BALISE POUR UTILISER LE SHORTCODE
add_shortcode( 'heure', 'heure_func' );

```

## THEME STARTER

    BASE DE CODE D'UN THEME
    DANS LEQUEL ON AJOUTE NOTRE CODE DIRECTEMENT DANS LE THEME STARTER...
    (ON NE CREE PAS DE THEME ENFANT...)

    * THEME STARTER DES DEV DE THEME WORDPRESS
    https://underscores.me/

    * AUTRES INITIATIVES INTERESSANTES
    https://www.wpbeginner.com/wp-themes/21-best-wordpress-starter-themes-for-developers/

## THEMES ENFANTS

    ON UTILISE UN THEME DEJA CODE (THEME PARENT)
    ET ON LE COMPLETE/MODIFIE EN AJOUTANT NOTRE CODE DANS UN THEME ENFANT

    PAUSE JUSQU'A 13H40...

    SCENARIO: 
    * LE CLIENT N'A PAS LE BUDGET POUR PAYER UN THEME CODE DE ZERO
        => ON VA PARTIR SUR UN THEME GRATUIT/PAYANT
                ET LE COMPLETER/PERSONNALISER

    * CATALOGUE DE THEMES GRATUITS
    https://wordpress.org/themes/#

    * THEMES PAYANTS
        MARKETPLACE
    https://themeforest.net/category/wordpress
    ...

        INDEPENDANTS
    https://www.elegantthemes.com/
    ...

    SI ON MODIFIE LE CODE DU THEME
    UNE MISE A JOUR DU THEME VA ECRASER MES MODIFS... :-/

    POUR NE PAS PERDRE SON CODE
    => IL FAUT CODER HORS DU DOSSIER DU THEME PARENT

## CREER UN THEME ENFANT

    CREER UN DOSSIER DANS themes/
    ET AJOUTER UN FICHIER style.css
    ET AJOUTER UNE ANNOTATION 

```css

    /*
Template: colibri-wp
            => ATTENTION: NOM DU DOSSIER DU CODE DU THEME PARENT

UNE ANNOTATION
=> COMMENTAIRE POUR CSS
=> CODE ACTIF POUR WORDPRESS

*/

```

    UNE FOIS LE THEME ENFANT RECONNU PAR WORDPRESS
    ON PEUT ACTIVER LE THEME ENFANT
    => ATTENTION: IL SE PEUT QUE LE CSS CASSE :-/

    => SI J'AI COPIE UN FICHIER DU THEME PARENT DANS LE DOSSIER DU THEME ENFANT
        WORDPRESS VA UTILISER EN PRIORITE LE CODE DANS LE THEME ENFANT
            SINON WORDPRESS VA ALLER CHERCHER LE FICHIER DANS LE THEME PARENT
            (C'EST LA FONCTION get_template_part... QUI PERMET CETTE MECANIQUE...)

    ATTENTION: 
        SI LES MISES A JOUR MODIFIENT LES FICHIERS COPIES
        => ON VA SUREMENT AVOIR UN SOUCI...


    EXCEPTION A LA PRIORITE:
    POUR LE FICHIER functions.php
    WORDPRESS VA CHARGER LES 2 FICHIERS
    * EN PREMIER CELUI DU THEME ENFANT
    * ENSUITE CELUI DU THEME PARENT

## EXTENSION POUR AIDER A CREER UN THEME ENFANT

    CHILD THEME CONFIGURATOR
    https://fr.wordpress.org/plugins/child-theme-configurator/

    INSTALLER ET ACTIVER L'EXTENSION
    => AJOUTE UN MENU DANS Outils > Thèmes enfants

    AVEC CETTE EXTENSION, ON PEUT CREER UN THEME ENFANT PLUS FACILEMENT

    SI ON A DES SOUCIS DE DROITS D'ECRITURE SUR LES FICHIERS...

```php

// ...

// A RAJOUTER DANS wp-config.php
// POUR DONNER LES DROITS EN ECRITURE A TOUT LE MONDE
define( 'FS_CHMOD_DIR', 0777 );
define( 'FS_CHMOD_FILE', 0666 );

/* C’est tout, ne touchez pas à ce qui suit ! Bonne publication. */

// ...

```

## AJOUTER DES SHORTCODES SUPPLEMENTAIRES

    DANS LE FICHIER functions.php DU THEME ENFANT
    ON PEUT RAJOUTER DU CODE PHP
    => ON PEUT RAJOUTER DES SHORTCODES SUPPLEMENTAIRES


## AJOUTER DES TEMPLATES DE PAGES SUPPLEMENTAIRES

    ON PEUT CONTINUER A UTILISER LES TEMPLATES DE PAGE DU THEME PARENT
    ET ON PEUT RAJOUTER DES DES TEMPLATES DE PAGE SUPPLEMENTAIRES DANS LE THEME ENFANT

## AJOUTER DES TEMPLATES SUPPLEMENTAIRES DANS LA HIERARCHIE DE WORDPRESS 

    PAR EXEMPLE: ON PEUT RAJOUTER front-page.php DANS LE THEME ENFANT
        POUR PRENDRE LA MAIN SUR LA PAGE D'ACCUEIL

## EXERCICE

    CHOISIR UN THEME PARENT
    ET ENSUITE CREER UN THEME ENFANT
    ET AJOUTER DU CODE DANS LE THEME ENFANT...
    ... COPIER UN FICHIER DU THEME PARENT POUR LE MODIFIER
    ... AJOUTER UN TEMPLATE DE PAGE SUPPLEMENTAIRE
    ... AJOUTER UN SHORTCODE SUPPLEMENTAIRE DANS functions.php

    (IL Y A ENCORE D'AUTRES MECANISMES WORDPRESS SUIVANT LES MODIFS QU'ON VEUT PERSONNALISER...)


    PAUSE JUSQU'A 15H45...

    














    
